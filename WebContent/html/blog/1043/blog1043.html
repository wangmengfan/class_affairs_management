<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="/img/favicon.ico" type="image/x-icon" rel="shortcut icon" /> 
<title></title>
<style type="text/css">
#static_introduce table{width:520px !important;}
#static_introduce{word-wrap:break-word;word-break:break-all;}
</style>
</head>
<body>
<div id="static_introduce">系统环境:操作系统:windowsxp数据库:mongodb2.0.6驱 动 包: Spring3.1.2+mongodb2.7.3+spring-data-mongodb1.0.1说明:对于xp系统用户,在执行mongod.exe安装mongodb时出现,无法定位程序输入点InterlockedCompareExchange64于动态链接库KERNEL32.dll上,这是因为最新的开发分支已经不再支持xp.也就是说你的mongodb安装包不支持xp系统.V2.0.6是最新也是最后一个新版本支持xp.所以笔者使用数据库为2.0.6项目结构:配置说明:Web.xml文件配置spring相关与springmvc相关.&lt;?xmlversion=&quot;1.0&quot;encoding=&quot;UTF-8&quot;?&gt;&lt;web-appversion=&quot;2.5&quot;
xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;&gt;

&lt;!--spring配置--&gt;
&lt;context-param&gt;
&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
&lt;param-value&gt;/WEB-INF/context/spring-context.xml&lt;/param-value&gt;
&lt;/context-param&gt;

&lt;listener&gt;
&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
&lt;/listener&gt;

&lt;!--springMVC配置--&gt;
&lt;servlet&gt;
&lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;
&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
&lt;init-param&gt;
&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
&lt;param-value&gt;/WEB-INF/context/servlet-context.xml&lt;/param-value&gt;&lt;!--指定XML文件位置--&gt;
&lt;/init-param&gt;
&lt;load-on-startup&gt;4&lt;/load-on-startup&gt;

&lt;/servlet&gt;
&lt;servlet-mapping&gt;
&lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;
&lt;url-pattern&gt;/&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;

&lt;welcome-file-list&gt;
&lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
&lt;/welcome-file-list&gt;&lt;/web-app&gt;Springmvc的配置文件servlet-context.xml&lt;?xmlversion=&quot;1.0&quot;encoding=&quot;UTF-8&quot;?&gt;&lt;beansxmlns=&quot;http://www.springframework.org/schema/beans&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns:util=&quot;http://www.springframework.org/schema/util&quot;
xmlns:p=&quot;http://www.springframework.org/schema/p&quot;
xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
xsi:schemaLocation=&quot;
http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/utilhttp://www.springframework.org/schema/util/spring-util-3.1.xsd
http://www.springframework.org/schema/txhttp://www.springframework.org/schema/tx/spring-tx-3.1.xsd
http://www.springframework.org/schema/aophttp://www.springframework.org/schema/aop/spring-aop-3.1.xsd
http://www.springframework.org/schema/mvchttp://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.1.xsd&quot;&gt;

&lt;!--DispatcherServletContext:definesthisservlet&#39;srequest-processinginfrastructure--&gt;

&lt;!--EnablestheSpringMVC@Controllerprogrammingmodel--&gt;
&lt;mvc:annotation-driven/&gt;

&lt;context:component-scanbase-package=&quot;com.pudp&quot;/&gt;


&lt;!--配置基于Session的处理,将提交上来的locale参数进行处理--&gt;
&lt;beanid=&quot;localeResolver&quot;class=&quot;org.springframework.web.servlet.i18n.SessionLocaleResolver&quot;&gt;
&lt;!--该属性可以不用配置--&gt;
&lt;propertyname=&quot;defaultLocale&quot;value=&quot;ja&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;!--Resolvesviewsselectedforrenderingby@Controllersto.jspresourcesinthe/WEB-INF/viewsdirectory--&gt;
&lt;beanclass=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;
&lt;propertyname=&quot;prefix&quot;value=&quot;/WEB-INF/views/&quot;/&gt;
&lt;propertyname=&quot;suffix&quot;value=&quot;.jsp&quot;/&gt;
&lt;/bean&gt;

&lt;/beans&gt;spring配置文件Spring-context.xml&lt;?xmlversion=&quot;1.0&quot;encoding=&quot;UTF-8&quot;?&gt;&lt;beansxmlns=&quot;http://www.springframework.org/schema/beans&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns:util=&quot;http://www.springframework.org/schema/util&quot;
xmlns:p=&quot;http://www.springframework.org/schema/p&quot;
xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
xsi:schemaLocation=&quot;
http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/utilhttp://www.springframework.org/schema/util/spring-util-3.1.xsd
http://www.springframework.org/schema/txhttp://www.springframework.org/schema/tx/spring-tx-3.1.xsd
http://www.springframework.org/schema/aophttp://www.springframework.org/schema/aop/spring-aop-3.1.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.1.xsd&quot;&gt;


&lt;context:annotation-config/&gt;
&lt;context:component-scanbase-package=&quot;com.pudp&quot;/&gt;

&lt;!--导入mongodb的配置文件--&gt;
&lt;importresource=&quot;mongodb-context.xml&quot;/&gt;
&lt;/beans&gt;mongodb的配置文件mongodb-context.xml&lt;?xmlversion=&quot;1.0&quot;encoding=&quot;UTF-8&quot;?&gt;&lt;beansxmlns=&quot;http://www.springframework.org/schema/beans&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
xmlns:mongo=&quot;http://www.springframework.org/schema/data/mongo&quot;
xsi:schemaLocation=&quot;http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/data/mongo
http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;

&lt;!--加载mongodb的属性配置文件--&gt;
&lt;context:property-placeholderlocation=&quot;classpath:mongodb.properties&quot;/&gt;

&lt;!--定义mongo对象，对应的是mongodb官方jar包中的Mongo，replica-set设置集群副本的ip地址和端口--&gt;
&lt;mongo:mongoid=&quot;mongo&quot;replica-set=&quot;${mongo.hostport}&quot;&gt;
&lt;!--一些连接属性的设置--&gt;
&lt;mongo:optionsconnections-per-host=&quot;${mongo.connectionsPerHost}&quot;
threads-allowed-to-block-for-connection-multiplier=&quot;${mongo.threadsAllowedToBlockForConnectionMultiplier}&quot;
connect-timeout=&quot;${mongo.connectTimeout}&quot;
max-wait-time=&quot;${mongo.maxWaitTime}&quot;
auto-connect-retry=&quot;${mongo.autoConnectRetry}&quot;
socket-keep-alive=&quot;${mongo.socketKeepAlive}&quot;
socket-timeout=&quot;${mongo.socketTimeout}&quot;
slave-ok=&quot;${mongo.slaveOk}&quot;
write-number=&quot;1&quot;
write-timeout=&quot;0&quot;
write-fsync=&quot;true&quot;/&gt;
&lt;/mongo:mongo&gt;
&lt;mongo:db-factorydbname=&quot;database&quot;mongo-ref=&quot;mongo&quot;/&gt;

&lt;beanid=&quot;mongoTemplate&quot;class=&quot;org.springframework.data.mongodb.core.MongoTemplate&quot;&gt;
&lt;constructor-argref=&quot;mongo&quot;/&gt;
&lt;constructor-argname=&quot;databaseName&quot;value=&quot;db_mongo&quot;/&gt;
&lt;/bean&gt;&lt;/beans&gt;mongodb的属性配置文件mongodb.propertiesmongo.hostport=127.0.0.1:27017
mongo.connectionsPerHost=8
mongo.threadsAllowedToBlockForConnectionMultiplier=4
#连接超时时间
mongo.connectTimeout=1000
#等待时间
mongo.maxWaitTime=1500
mongo.autoConnectRetry=true
mongo.socketKeepAlive=true
#Socket超时时间
mongo.socketTimeout=1500
mongo.slaveOk=true编写Controller、Service、Dao相关.这里我们测试以下Spring-data-mong中对Collection的实现机制.我们创建不同的实体类型Member、Article然后编写对应的Service、Dao实现.这里我们侧重点持久层实现</div>

</body>

</html>